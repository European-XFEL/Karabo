#!/bin/bash
####################################################################################
# allStart removes "temporary" application XML configuration files. This guarantees 
# a clean restart
# author: CY 18.12.2012

# configuration file present?
foo=./allInfo
test -r $foo || { echo "ERROR cannot read definitions file $foo";  exit 1;}

# ALLINFO content checking is done in allCheck 
source ./allInfo

for key in "${!ALLINFO[@]}"
do
    value=${ALLINFO[$key]}
    source ./.allParse

    target=$name
    folder=$dir
    if [ "$target" == "master" ]; then
	foo=$folder/autoload.xml
	#if [ -e $foo ]; then rm $foo; fi;
	foo=$folder/lastConfiguration.xml
	#if [ -e $foo ]; then rm $foo; fi;
    elif [ "$target" == "server" ]; then
	foo=$folder/autoload.xml
	#if [ -e $foo ]; then rm $foo; fi;
	foo=$folder/lastConfiguration.xml
	#if [ -e $foo ]; then rm $foo; fi;
    fi 
done

exit 0
