--- sip-4.16.7/siputils.py	2009-09-01 00:00:00.000000000 +0200
+++ sip-4.16.7/siputils.py	2017-05-31 10:39:41.611167174 +0200
@@ -2729,3 +2729,21 @@
         os.chmod(wrapper, mode)
 
     return wrapper
+
+# the rest of this file was added by Karabo to make sip relocatable
+try:
+    import os.path as osp
+    newpath = osp.dirname(__file__)
+    oldpath = _pkg_config["default_mod_dir"]
+
+    common = len(osp.commonprefix([newpath[::-1], oldpath[::-1]]))
+    oldpath = oldpath[:-common]
+    newpath = newpath[:-common]
+
+    for key in list(_pkg_config):
+        if key[-4:] in {"_dir", "_bin"}:
+            path = _pkg_config[key]
+            assert path.startswith(oldpath)
+            _pkg_config[key] = newpath + path[len(oldpath):]
+except NameError:
+    pass
