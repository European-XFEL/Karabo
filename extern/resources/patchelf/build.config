source "$CWD/../../../set_lsb_release_info.sh"

if [ "$OS" = "Linux" ]; then
    DISTRO_ID=$(echo $LSB_RELEASE_DIST | sed -r 's/ /_/g')
    DISTRO_RELEASE=$LSB_RELEASE_VERSION
elif [ "$OS" = "Darwin" ]; then
    DISTRO_ID=MacOSX
    DISTRO_RELEASE=$(uname -r)
fi

DEP_NAME="patchelf-0.10"
DEP_EXT="tar.gz"
EXTRACT_COMMAND="tar -xzf $DEP_NAME.$DEP_EXT"

echo "Distribution is $DISTRO_ID"

# we only actually install anything for CentOS, all other, more modern OSs are covered via Conan
if [ "$DISTRO_ID" = "CentOS" ]; then
    echo "...compiling"
    CONFIGURE_COMMAND="./bootstrap.sh && ./configure --prefix $INSTALL_PREFIX"
    MAKE_COMMAND="make -j$NUM_CORES"
    INSTALL_COMMAND="make install"
fi
